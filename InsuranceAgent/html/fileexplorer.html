<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3366CC',
                        accent: '#99CC33',
                        gray: {
                            soft: '#D3D3D3',
                            50: '#F9FAFB',
                            100: '#F3F4F6',
                            200: '#E5E7EB',
                            300: '#D1D5DB',
                            400: '#9CA3AF',
                            500: '#6B7280',
                            600: '#4B5563',
                            700: '#374151',
                            800: '#1F2937',
                        }
                    },
                    fontFamily: {
                        'roboto': ['Roboto', 'sans-serif']
                    },
                    keyframes: {
                        'upload-progress': {
                            '0%': { width: '0%' },
                            '100%': { width: '100%' },
                        }
                    },
                    animation: {
                        'upload-progress': 'upload-progress 1.5s ease-in-out forwards',
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script>window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        ::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 font-roboto">

    <!--<div id="header" class="bg-white border-b border-gray-soft shadow-sm">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-shield-halved text-white text-sm"></i>
                        </div>
                        <h1 class="text-xl font-bold text-gray-800">Copilot Insurance Generator</h1>
                    </div>
                    <nav class="flex space-x-6">
                        <span class="text-gray-600 hover:text-primary font-medium cursor-pointer cursor-pointer">Home</span>
                        <span class="text-gray-600 hover:text-primary font-medium cursor-pointer cursor-pointer">Generate Leads</span>
                        <span class="text-gray-600 hover:text-primary font-medium cursor-pointer cursor-pointer">Lead List</span>
                        <span class="text-primary font-medium border-b-2 border-primary pb-1 cursor-pointer cursor-pointer">AI Assistance</span>
                        <span class="text-gray-600 hover:text-primary font-medium cursor-pointer cursor-pointer">Reports</span>
                        <span class="text-gray-600 hover:text-primary font-medium cursor-pointer cursor-pointer">Settings</span>
                    </nav>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="w-8 h-8 bg-gray-200 rounded-full overflow-hidden">
                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Agent" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </div>
    </div>-->

    <div id="main-content" class="max-w-7xl mx-auto px-6 py-8">
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">AI Document Processing</h2>
            <p class="text-gray-600">Upload documents to be processed by the semantic kernel and added to the vector database.</p>
        </div>

        <div id="document-manager-container" class="bg-white rounded-lg shadow-sm border border-gray-soft overflow-hidden">
            <div class="flex">
                <div id="sidebar-nav" class="w-64 bg-gray-50 border-r border-gray-soft p-4">
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 px-2">Knowledge Base</h3>
                    <nav class="space-y-1">
                        <span class="flex items-center px-2 py-2 text-sm font-medium bg-primary/10 text-primary rounded-md cursor-pointer">
                            <i class="fa-solid fa-cloud-upload w-5 h-5 mr-3"></i>
                            <span>Upload Documents</span>
                        </span>
                        <span class="flex items-center px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 rounded-md cursor-pointer">
                            <i class="fa-solid fa-database w-5 h-5 mr-3"></i>
                            <span>Vector DB Status</span>
                        </span>
                        <span class="flex items-center px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 rounded-md cursor-pointer">
                            <i class="fa-solid fa-file-lines w-5 h-5 mr-3"></i>
                            <span>Processed Files</span>
                        </span>
                        <span class="flex items-center px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 rounded-md cursor-pointer">
                            <i class="fa-solid fa-gears w-5 h-5 mr-3"></i>
                            <span>Configuration</span>
                        </span>
                    </nav>
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 px-2">Storage</h3>
                        <div class="px-2 space-y-3">
                            <p class="text-xs text-gray-600">Destination Folder:</p>
                            <div class="flex items-center space-x-2 bg-gray-200 p-2 rounded-md">
                                <i class="fa-solid fa-folder text-primary"></i>
                                <span class="text-xs font-mono text-gray-700 truncate">wwroot\documents</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="main-panel" class="flex-1 p-6">
                    <div id="toolbar" class="flex justify-between items-center pb-4 border-b border-gray-soft mb-6">
                        <div class="flex items-center space-x-2">
                            <button id="upload-button" class="bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 font-medium text-sm flex items-center space-x-2">
                                <i class="fa-solid fa-plus"></i>
                                <span>Upload New</span>
                            </button>
                            <input type="file" id="file-input" class="hidden" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.txt">
                            <button class="bg-gray-100 text-gray-700 px-3 py-2 rounded-md hover:bg-gray-200 font-medium text-sm border border-gray-soft">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="relative w-64">
                                <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                <input type="text" placeholder="Search documents..." class="w-full pl-9 pr-3 py-2 border border-gray-soft rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none">
                            </div>
                            <button class="bg-gray-100 text-gray-700 px-3 py-2 rounded-md hover:bg-gray-200 font-medium text-sm border border-gray-soft flex items-center space-x-2">
                                <i class="fa-solid fa-filter text-sm"></i>
                                <span>Filter</span>
                            </button>
                        </div>
                    </div>

                    <div id="upload-area-container">
                        <div id="upload-dropzone" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors">
                            <div class="flex flex-col items-center">
                                <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4">
                                    <i class="fa-solid fa-cloud-arrow-up text-primary text-3xl"></i>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800">Drag & drop files here</h3>
                                <p class="text-gray-500 mt-1">or click to browse from your computer</p>
                                <p class="text-xs text-gray-400 mt-4">Supports: PDF, DOC, DOCX, XLS, XLSX, TXT</p>
                            </div>
                        </div>
                    </div>

                    <div id="processing-files-list" class="mt-6 hidden">
                        <h3 class="text-sm font-bold text-gray-600 mb-3">Processing Queue (0)</h3>
                        <div id="file-list-items" class="space-y-3">
                        </div>
                    </div>

                    <div id="empty-state" class="mt-8 text-center hidden">
                        <i class="fa-regular fa-file-excel text-5xl text-gray-300"></i>
                        <h4 class="mt-4 text-lg font-medium text-gray-700">No files in queue</h4>
                        <p class="mt-1 text-sm text-gray-500">Upload documents to start processing.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <template id="file-item-template">
        <div class="file-item bg-white p-3 rounded-md border border-gray-soft flex items-center space-x-4">
            <div class="file-icon text-2xl w-8 text-center"></div>
            <div class="flex-1">
                <div class="flex justify-between items-center">
                    <p class="file-name text-sm font-medium text-gray-800 truncate"></p>
                    <p class="file-size text-sm text-gray-500"></p>
                </div>
                <div class="progress-container mt-2">
                    <div class="w-full bg-gray-200 rounded-full h-1.5">
                        <div class="progress-bar bg-primary h-1.5 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="status-text text-xs text-gray-500 mt-1 flex justify-between">
                        <span class="upload-status">Uploading...</span>
                        <span class="percentage">0%</span>
                    </div>
                </div>
            </div>
            <button class="cancel-upload text-gray-400 hover:text-red-500 p-1 rounded-full">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
    </template>


    <script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadButton = document.getElementById('upload-button');
    const fileInput = document.getElementById('file-input');
    const dropzone = document.getElementById('upload-dropzone');
    const processingList = document.getElementById('processing-files-list');
    const fileListContainer = document.getElementById('file-list-items');
    const fileItemTemplate = document.getElementById('file-item-template');
    const queueTitle = processingList.querySelector('h3');
    const emptyState = document.getElementById('empty-state');

    let fileQueue = [];

    const triggerFileInput = () => fileInput.click();

    uploadButton.addEventListener('click', triggerFileInput);
    dropzone.addEventListener('click', triggerFileInput);

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropzone.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
        dropzone.addEventListener(eventName, () => dropzone.classList.add('bg-primary/10', 'border-primary'), false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropzone.addEventListener(eventName, () => dropzone.classList.remove('bg-primary/10', 'border-primary'), false);
    });

    dropzone.addEventListener('drop', handleDrop, false);
    fileInput.addEventListener('change', handleFileSelect, false);

    function handleDrop(e) {
        let dt = e.dataTransfer;
        let files = dt.files;
        handleFiles(files);
    }

    function handleFileSelect(e) {
        handleFiles(e.target.files);
        e.target.value = '';
    }

    function handleFiles(files) {
        [...files].forEach(file => {
            fileQueue.push(file);
            addFileToList(file);
        });
        updateQueueTitle();
    }

    function addFileToList(file) {
        if (processingList.classList.contains('hidden')) {
            processingList.classList.remove('hidden');
            emptyState.classList.add('hidden');
        }

        const clone = fileItemTemplate.content.cloneNode(true);
        const fileItem = clone.querySelector('.file-item');

        fileItem.querySelector('.file-name').textContent = file.name;
        fileItem.querySelector('.file-size').textContent = formatBytes(file.size);
        fileItem.querySelector('.file-icon').innerHTML = getFileIcon(file.type, file.name);

        const cancelButton = fileItem.querySelector('.cancel-upload');
        cancelButton.onclick = () => {
            fileItem.remove();
            fileQueue = fileQueue.filter(f => f !== file);
            updateQueueTitle();
        };

        fileListContainer.appendChild(clone);
        simulateUpload(fileItem, file);
    }

    function simulateUpload(fileItem, file) {
        const progressBar = fileItem.querySelector('.progress-bar');
        const percentageText = fileItem.querySelector('.percentage');
        const uploadStatusText = fileItem.querySelector('.upload-status');

        let progress = 0;
        const interval = setInterval(() => {
            progress += Math.random() * 10;
            if (progress > 100) progress = 100;

            progressBar.style.width = progress + '%';
            percentageText.textContent = Math.round(progress) + '%';

            if (progress === 100) {
                clearInterval(interval);
                uploadStatusText.textContent = 'Processing...';
                percentageText.textContent = 'Done';

                setTimeout(() => {
                    uploadStatusText.innerHTML = '<i class="fa-solid fa-check-circle text-accent mr-1"></i>Completed';
                    uploadStatusText.classList.add('text-green-600');
                    fileItem.querySelector('.progress-container').classList.add('opacity-50');
                    fileItem.querySelector('.cancel-upload').remove();
                }, 1000 + Math.random() * 1000);
            }
        }, 200);
    }

    function updateQueueTitle() {
        queueTitle.textContent = `Processing Queue (${fileQueue.length})`;
        if (fileQueue.length === 0) {
            processingList.classList.add('hidden');
        }
    }

    function getFileIcon(fileType, fileName) {
        const extension = fileName.split('.').pop().toLowerCase();
        if (extension === 'pdf') return '<i class="fa-solid fa-file-pdf text-red-500"></i>';
        if (['doc', 'docx'].includes(extension)) return '<i class="fa-solid fa-file-word text-blue-500"></i>';
        if (['xls', 'xlsx'].includes(extension)) return '<i class="fa-solid fa-file-excel text-green-500"></i>';
        if (extension === 'txt') return '<i class="fa-solid fa-file-alt text-gray-500"></i>';
        return '<i class="fa-solid fa-file text-gray-400"></i>';
    }

    function formatBytes(bytes, decimals = 2) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    }
});
    </script>

</body>
</html>