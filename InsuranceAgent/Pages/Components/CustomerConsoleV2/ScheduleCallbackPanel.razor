<div class="bg-gradient-to-br from-blue-50 to-white rounded-xl border-2 border-blue-200 p-6">

    <div class="flex items-center justify-center mb-4">
        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center shadow-lg">
            <i class="fa-solid fa-calendar-check text-white text-2xl"></i>
        </div>
    </div>

    <h3 class="text-lg font-bold text-gray-900 text-center mb-2">Schedule Callback</h3>
    <p class="text-xs text-gray-600 text-center mb-4">Let @ClientName choose a convenient time</p>

    <div class="space-y-3 mb-4">

        <div>
            <label class="block text-xs font-semibold text-gray-700 mb-1">Preferred Date</label>
            <input type="date"
                   @bind="PreferredDate"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm" />
        </div>

        <div>
            <label class="block text-xs font-semibold text-gray-700 mb-1">Preferred Time</label>
            <select @bind="PreferredTime"
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                @foreach (var slot in TimeSlots) {
                    <option value="@slot">@slot</option>
                }
            </select>
        </div>

        <div>
            <label class="block text-xs font-semibold text-gray-700 mb-1">Additional Notes</label>
            <textarea @bind="Notes"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-sm"
                      rows="2"
                      placeholder="Any specific topics...">
            </textarea>
        </div>

    </div>

    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors text-sm shadow-lg"
            @onclick="Schedule">
        <i class="fa-solid fa-calendar-plus mr-2"></i>
        Schedule Callback
    </button>
</div>


@code {
    [Parameter] public string ClientName { get; set; } = "Client";

    // Form state
    private DateTime PreferredDate { get; set; } = DateTime.Today.AddDays(1);
    private string PreferredTime { get; set; } = "9:00 AM - 10:00 AM";
    private string Notes { get; set; } = "";

    private List<string> TimeSlots { get; set; } = new()
    {
        "9:00 AM - 10:00 AM",
        "10:00 AM - 11:00 AM",
        "11:00 AM - 12:00 PM",
        "1:00 PM - 2:00 PM",
        "2:00 PM - 3:00 PM",
        "3:00 PM - 4:00 PM",
        "4:00 PM - 5:00 PM"
    };

    [Parameter] public EventCallback<(DateTime date, string time, string notes)> OnSchedule { get; set; }

    private async Task Schedule() {
        if (OnSchedule.HasDelegate)
            await OnSchedule.InvokeAsync((PreferredDate, PreferredTime, Notes));
    }
}
